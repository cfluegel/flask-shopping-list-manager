{% extends 'base.html' %}

{% block title %}Liste bearbeiten - Einkaufsliste{% endblock %}

{% block content %}
<div class="content-wrapper">
  <!-- Back Button -->
  <a href="{{ url_for('main.view_list', list_id=shopping_list.id) }}" class="btn btn-secondary" style="margin-bottom: 1.5rem;">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <line x1="19" y1="12" x2="5" y2="12"></line>
      <polyline points="12 19 5 12 12 5"></polyline>
    </svg>
    Zurück
  </a>

  <!-- Page Header -->
  <h1 style="margin-bottom: 0.5rem;">Liste bearbeiten</h1>
  <p class="text-muted" style="margin-bottom: 2rem;">Ändere den Namen oder die Freigabeeinstellungen.</p>

  <!-- Edit List Form -->
  <div class="card" style="max-width: 600px;">
    <form method="POST" action="{{ url_for('main.edit_list', list_id=shopping_list.id) }}">
      {{ form.hidden_tag() }}

      <!-- Title Field -->
      <div class="form-group">
        <label for="title" class="form-label">Listenname</label>
        {{ form.title(class="form-control", id="title") }}
        {% if form.title.errors %}
          <div class="form-error">
            {% for error in form.title.errors %}{{ error }}{% endfor %}
          </div>
        {% endif %}
      </div>

      <!-- Is Shared Field -->
      <div class="form-group">
        <div class="form-check">
          {{ form.is_shared(id="is_shared") }}
          <label for="is_shared">Liste öffentlich teilen</label>
        </div>
        <small class="text-muted" style="display: block; margin-top: 0.5rem; margin-left: 28px;">
          Wenn aktiviert, kann die Liste über einen Link mit anderen geteilt werden.
        </small>
      </div>

      <!-- Submit Button -->
      <div class="form-group" style="margin-bottom: 0;">
        <button type="submit" class="btn btn-primary btn-block">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
            <polyline points="17 21 17 13 7 13 7 21"></polyline>
            <polyline points="7 3 7 8 15 8"></polyline>
          </svg>
          Änderungen speichern
        </button>
      </div>
    </form>
  </div>

  <!-- Delete List Section -->
  <div class="card" style="max-width: 600px; margin-top: 2rem; border: 1px solid var(--color-danger);">
    <h3 style="color: var(--color-danger); margin-bottom: 0.5rem;">Gefahrenzone</h3>
    <p class="text-muted" style="margin-bottom: 1rem;">Das Löschen dieser Liste kann nicht rückgängig gemacht werden.</p>
    <form method="POST" action="{{ url_for('main.delete_list', list_id=shopping_list.id) }}" onsubmit="return confirm('Möchtest du diese Liste wirklich löschen? Diese Aktion kann nicht rückgängig gemacht werden.');">
      <button type="submit" class="btn btn-danger">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="3 6 5 6 21 6"></polyline>
          <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
          <line x1="10" y1="11" x2="10" y2="17"></line>
          <line x1="14" y1="11" x2="14" y2="17"></line>
        </svg>
        Liste löschen
      </button>
    </form>
  </div>
</div>
{% endblock %}
