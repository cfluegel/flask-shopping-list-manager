<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Einkaufsliste - Verwalte deine EinkÃ¤ufe einfach und Ã¼bersichtlich">
  <title>{% block title %}Einkaufsliste{% endblock %}</title>

  <!-- Favicon -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ›’</text></svg>">

  <!-- Stylesheet -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">

  {% block extra_css %}{% endblock %}
</head>
<body>
  <!-- Navigation Bar -->
  <nav class="navbar">
    <div class="container navbar-container">
      <!-- Brand -->
      <a href="{{ url_for('main.index') }}" class="navbar-brand">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="9" cy="21" r="1"></circle>
          <circle cx="20" cy="21" r="1"></circle>
          <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
        </svg>
        <span>Einkaufsliste</span>
      </a>

      <!-- Mobile Menu Toggle -->
      <button class="navbar-toggle" id="navbar-toggle" aria-label="MenÃ¼ Ã¶ffnen">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="3" y1="12" x2="21" y2="12"></line>
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </button>

      <!-- Navigation Menu -->
      <ul class="navbar-menu" id="navbar-menu">
        {% if current_user.is_authenticated %}
          <li><a href="{{ url_for('main.dashboard') }}">Meine Listen</a></li>
          {% if current_user.is_admin %}
            <li><a href="{{ url_for('main.admin_dashboard') }}">Admin</a></li>
          {% endif %}
          <li>
            <span class="text-muted hide-mobile">{{ current_user.username }}</span>
          </li>
          <li><a href="{{ url_for('main.logout') }}">Abmelden</a></li>
        {% else %}
          <li><a href="{{ url_for('main.login') }}">Anmelden</a></li>
        {% endif %}

        <!-- Theme Switcher -->
        <li>
          <div class="theme-switcher">
            <button id="theme-light" class="active" aria-label="Light Theme" title="Helles Design">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="5"></circle>
                <line x1="12" y1="1" x2="12" y2="3"></line>
                <line x1="12" y1="21" x2="12" y2="23"></line>
                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                <line x1="1" y1="12" x2="3" y2="12"></line>
                <line x1="21" y1="12" x2="23" y2="12"></line>
                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
              </svg>
            </button>
            <button id="theme-dark" aria-label="Dark Theme" title="Dunkles Design">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
              </svg>
            </button>
          </div>
        </li>
      </ul>
    </div>
  </nav>

  <!-- Flash Messages Container -->
  <div class="flash-messages" id="flash-messages">
    {% with messages = get_flashed_messages(with_categories=True) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="flash {{ category }}" role="alert">
            <div style="flex: 1;">{{ message }}</div>
            <button class="flash-close" aria-label="SchlieÃŸen" onclick="this.parentElement.remove()">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
              </svg>
            </button>
          </div>
        {% endfor %}
      {% endif %}
    {% endwith %}
  </div>

  <!-- Main Content -->
  <main>
    <div class="container">
      {% block content %}{% endblock %}
    </div>
  </main>

  <!-- Footer (optional) -->
  <footer style="padding: 2rem 0; text-align: center; color: var(--color-text-muted); font-size: var(--font-size-sm);">
    <div class="container">
      <p>&copy; 2025 Einkaufsliste - Deine Shopping-List-Verwaltung</p>
    </div>
  </footer>

  <!-- JavaScript -->
  <script src="{{ url_for('static', filename='js/main.js') }}?v=4"></script>
  {% block extra_js %}{% endblock %}
</body>
</html>
